{% set adView = _view.loadHelper('Agency.AdView') %}
{% set imageResized = _view.loadHelper('ImageCompress.ImageResized') %}
{% set price = _view.loadHelper('Agency.Price') %}
{% set complexCategory = _view.loadHelper('ComplexCategories.ComplexCategory') %}
{% set favorite = _view.loadHelper('Favorites.Favorite') %}
<section class="crumbs">
    <div class="container">
        <div class="row">
            <div class="col-12 d-flex align-items-center justify-content-between">
                <h2 class="crumbs__title section-title">Избранное</h2>
                <a href="#" class="crumbs__clean d-xl-flex d-lg-flex d-md-flex align-items-center d-none">
                    <svg width="21" height="24" viewBox="0 0 21 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_1196_1242)"><path d="M7.50003 21L10.499 18V19.5C11.9834 19.5002 13.4344 19.06 14.6685 18.2351C15.9026 17.4102 16.8641 16.2377 17.4315 14.866C17.9988 13.4944 18.1465 11.9852 17.8557 10.5296C17.5649 9.07403 16.8488 7.73742 15.798 6.689L17.912 4.565C18.8924 5.53929 19.67 6.69812 20.2 7.97459C20.73 9.25106 21.0019 10.6199 21 12.002C21 17.8 16.3 22.5 10.502 22.5H10.5V24L7.50003 21ZM3.1148e-05 12C0.00703115 6.204 4.70403 1.507 10.499 1.5H10.5V0L13.5 3L10.5 6V4.5H10.498C9.01368 4.50008 7.56271 4.94051 6.32875 5.76553C5.09479 6.59056 4.13332 7.76309 3.566 9.13476C2.99868 10.5064 2.85103 12.0156 3.14172 13.4712C3.43241 14.9268 4.14839 16.2634 5.19903 17.312L3.08703 19.436C2.10725 18.4675 1.32972 17.314 0.799598 16.0424C0.26948 14.7709 -0.00264656 13.4066 -0.000968852 12.029V11.999V12.001L3.1148e-05 12Z" fill="white" /></g>
                        <defs><clipPath id="clip0_1196_1242"><rect width="21" height="24" fill="white" /></clipPath></defs>
                    </svg>
                    <span class="crumbs__text">Очистить</span>
                </a>
            </div>
        </div>
    </div>
</section>
<section class="favorites">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="objects__navigation d-flex align-items-center">
                    <span class="objects__name objects__name_one d-xl-flex align-items-center justify-content-center d-lg-flex d-md-flex d-none">Фото</span>
                    <button class="objects__wrapper d-flex align-items-center justify-content-center objects__wrapper_one">
                        <svg class="objects__icon" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.93485 13.9999L5.02588 10.4999L5.81326 9.79492L8.93485 12.5849L12.0564 9.79492L12.8438 10.4999L8.93485 13.9999Z" fill="#283655" />
                            <path d="M8.93485 2L12.8438 5.5L12.0564 6.205L8.93485 3.415L5.81326 6.205L5.02588 5.5L8.93485 2Z" fill="#283655" />
                        </svg>
                        <span class="objects__name d-block">Площадь</span>
                    </button>
                    <button class="objects__wrapper d-flex align-items-center justify-content-center objects__wrapper_two">
                        <svg class="objects__icon" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.93485 13.9999L5.02588 10.4999L5.81326 9.79492L8.93485 12.5849L12.0564 9.79492L12.8438 10.4999L8.93485 13.9999Z" fill="#283655" />
                            <path d="M8.93485 2L12.8438 5.5L12.0564 6.205L8.93485 3.415L5.81326 6.205L5.02588 5.5L8.93485 2Z" fill="#283655" />
                        </svg>
                        <span class="objects__name d-block">Цена</span>
                    </button>
                    <button class="objects__wrapper d-flex align-items-center justify-content-center objects__wrapper_three">
                        <svg class="objects__icon" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.93485 13.9999L5.02588 10.4999L5.81326 9.79492L8.93485 12.5849L12.0564 9.79492L12.8438 10.4999L8.93485 13.9999Z" fill="#283655" />
                            <path d="M8.93485 2L12.8438 5.5L12.0564 6.205L8.93485 3.415L5.81326 6.205L5.02588 5.5L8.93485 2Z" fill="#283655" />
                        </svg>
                        <span class="objects__name d-block">Этаж</span>
                    </button>
                    <button class="objects__wrapper d-xl-flex d-lg-flex align-items-center justify-content-center objects__wrapper_four d-none">
                        <svg class="objects__icon" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.93485 13.9999L5.02588 10.4999L5.81326 9.79492L8.93485 12.5849L12.0564 9.79492L12.8438 10.4999L8.93485 13.9999Z" fill="#283655" />
                            <path d="M8.93485 2L12.8438 5.5L12.0564 6.205L8.93485 3.415L5.81326 6.205L5.02588 5.5L8.93485 2Z" fill="#283655" />
                        </svg>
                        <span class="objects__name d-block">Состояние</span>
                    </button>
                    <span class="objects__name objects__name_two d-xl-flex d-lg-flex align-items-center justify-content-center d-none">Планировка</span>
                </div>
                {% for advertisement in list %}
                    {% set paramsValues = advertisement.CategoryParamValues ?? [] %}
                    {% set gallery = adView.getGallery(advertisement) %}
                    {% set isFavorite = favorite.has('Advertisement', advertisement.Advertisement.id) %}
                    {% if not advertisement.Advertisement.parent_id %}
                        <div class="search__card d-flex justify-content-xl-between justify-content-lg-between justify-content-md-between flex-xl-row flex-lg-row flex-md-row flex-column">
                            <div class="swiper search-swiper">
                                <div class="swiper-wrapper search-wrapper">
                                    {% set galleryList = gallery.items ?: [gallery.first] %}
                                    {% set galleryList = galleryList|filter(item => item.plan != '1') %}
                                    {% set galleryList = galleryList|slice(0, 7) %}
                                    {% set galleryResizeList = imageResized.resizePicture(galleryList, {'width': '375', 'height': '340', 'mode': 'crop', 'paddings': false, 'folder': 'twig_crop_realty_view', 'cache_path_size': true}) %}
                                    {% for i, galleryItem in galleryResizeList %}
                                        <div class="search-slide swiper-slide">
                                            <div class="box search__box">
                                                <img data-src="{{ galleryItem.src }}" {% if i == 0 %} src="{{ galleryItem.src }}" {% endif%} alt="{{ galleryItem.description }}" class="search__image">
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                                <div class="swiper-pagination search-pagination"></div>
                            </div>
                            <div class="search__info d-flex flex-column">
                                <div class="search__mark d-xl-block d-none">
                                    <span class="search__desc">Аренда</span>
                                </div>
                                <div
                                    class="search__header d-flex flex-xl-row flex-lg-row flex-column align-items-xl-center align-items-lg-center align-items-start">
                                    <h3 class="search__sub subtitle">Бизнес-центр «Башня Империя»</h3>
                                    <div class="search__category d-flex align-items-center">
                                        <svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7 0L8.5716 4.83688H13.6574L9.5429 7.82624L11.1145 12.6631L7 9.67376L2.8855 12.6631L4.4571 7.82624L0.342604 4.83688H5.4284L7 0Z" fill="#777777" />
                                        </svg>
                                        <span class="search__class d-block">Класс А</span>
                                    </div>
                                </div>
                                <div class="search__location d-flex align-items-center">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14 6.72727C14 11.1818 8 15 8 15C8 15 2 11.1818 2 6.72727C2 5.20831 2.63214 3.75155 3.75736 2.67748C4.88258 1.60341 6.4087 1 8 1C9.5913 1 11.1174 1.60341 12.2426 2.67748C13.3679 3.75155 14 5.20831 14 6.72727Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M8 9C9.10457 9 10 8.10457 10 7C10 5.89543 9.10457 5 8 5C6.89543 5 6 5.89543 6 7C6 8.10457 6.89543 9 8 9Z" stroke="#777777" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    <span class="search__adress d-block">г. Москва, Пресненская наб. 6</span>
                                </div>
                                <div class="search__information d-flex align-items-center">
                                    <div class="search__metro d-flex align-items-center">
                                        <picture><source srcset="img/search/metro.webp" type="image/webp"><img src="img/search/metro.png" alt="станция метро"></picture>
                                        <span class="search__name d-block">Баррикадная</span>
                                    </div>
                                    <div class="search__metro d-flex align-items-center">
                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4.44322 5.082L6.31281 3.724C6.52268 3.57041 6.77796 3.49155 7.03789 3.5C7.35493 3.50791 7.66164 3.6144 7.91537 3.80467C8.1691 3.99494 8.35724 4.25953 8.45364 4.56167C8.56214 4.90175 8.66131 5.13158 8.75114 5.25117C9.02257 5.6133 9.37467 5.90719 9.7795 6.1095C10.1843 6.31181 10.6307 6.41698 11.0833 6.41667V7.58333C10.4809 7.58399 9.88583 7.45108 9.34095 7.19417C8.79607 6.93726 8.31492 6.56275 7.93214 6.09758L7.52556 8.40467L8.72781 9.41383L10.0246 12.9768L8.92789 13.3758L7.73789 10.1068L5.76039 8.44725C5.59811 8.31621 5.47392 8.14405 5.40077 7.94871C5.32762 7.75337 5.30818 7.54199 5.34447 7.33658L5.64139 5.65367L5.24647 5.94067L4.00572 7.64867L3.06189 6.96267L4.43331 5.075L4.44322 5.082ZM7.87497 3.20833C7.56555 3.20833 7.26881 3.08542 7.05002 2.86662C6.83122 2.64783 6.70831 2.35109 6.70831 2.04167C6.70831 1.73225 6.83122 1.4355 7.05002 1.21671C7.26881 0.997916 7.56555 0.875 7.87497 0.875C8.18439 0.875 8.48114 0.997916 8.69993 1.21671C8.91872 1.4355 9.04164 1.73225 9.04164 2.04167C9.04164 2.35109 8.91872 2.64783 8.69993 2.86662C8.48114 3.08542 8.18439 3.20833 7.87497 3.20833ZM6.14131 10.8973L4.26647 13.1314L3.37281 12.3818L5.10881 10.3133L5.54397 9.04167L6.58872 9.91667L6.14131 10.8973Z" fill="#ADADAD" />
                                        </svg>
                                        <span class="search__name d-block">5 мин</span>
                                    </div>
                                    <div class="search__metro d-flex align-items-center">
                                        <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M2.48222 5.8335V9.91683H4.34393V5.8335H2.48222ZM6.20563 5.8335V9.91683H8.06733V5.8335H6.20563ZM1.24109 12.8335H13.0319V11.0835H1.24109V12.8335ZM9.92903 5.8335V9.91683H11.7907V5.8335H9.92903ZM7.13648 0.583496L1.24109 3.50016V4.66683H13.0319V3.50016L7.13648 0.583496Z" fill="#ADADAD" />
                                        </svg>
                                        <span class="search__name d-block">ИФНС № 3</span>
                                    </div>
                                </div>
                                <table class="search__table">
                                    <tr>
                                        <th class="search__title">Площадь</th>
                                        <th class="search__title">руб. в месяц</th>
                                        <th class="search__title">Этаж</th>
                                        <th class="search__title d-xl-table-cell d-lg-table-cell d-none">Состояние</th>
                                        <th class="search__title d-xl-table-cell d-lg-table-cell d-none">Цена в год</th>
                                    </tr>
                                    <tr class="search__stroke">
                                        <td class="search__text">1568 кв.м</td>
                                        <td class="search__text">4 800 000</td>
                                        <td class="search__text">51</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell d-none">С отделкой</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell  d-none">55 800 000</td>
                                    </tr>
                                    <tr class="search__stroke">
                                        <td class="search__text">185 кв.м</td>
                                        <td class="search__text">57 000</td>
                                        <td class="search__text">51</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell  d-none">С отделкой</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell d-none">1 800 000</td>
                                    </tr>
                                    <tr class="search__stroke">
                                        <td class="search__text">135 кв.м</td>
                                        <td class="search__text">305 000</td>
                                        <td class="search__text">2</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell  d-none">Под отделку</td>
                                        <td class="search__text d-xl-table-cell d-lg-table-cell d-none">3 800 000</td>
                                    </tr>
                                </table>
                                <div
                                    class="search__buttons d-flex align-items-center justify-content-xl-between justify-content-lg-between justify-content-md-between justify-content-center">
                                    <a href="#" class="search__btn text-center btn-2">Посмотреть 12 предложений</a>
                                    <div class="search__price text-center">
                                        <span class="d-block text-center">Продается за 137 999 937 руб.</span>
                                    </div>
                                    <button class="search__save">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20 22V4C20 2.897 19.103 2 18 2H6C4.897 2 4 2.897 4 4V22L12 17.428L20 22Z" fill="#333333" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="objects__card d-flex align-items-center">
                            <div class="objects__left d-xl-block d-lg-block d-md-block d-none">
                                <div class="objects__box box">
                                    {% set galleryFirst = imageResized.resizeItemPicture(gallery.first, {'width': '117', 'height': '86', 'mode': 'crop', 'paddings': false, 'folder': 'twig_crop_children_view_objects', 'cache_path_size': true}) %}
                                    <img src="{{ galleryFirst.src }}" alt="{{ galleryItem.description }}" class="objects__preview">
                                </div>
                            </div>
                            <div class="objects__center d-flex">
                                <span class="objects__number objects__number_one d-flex align-items-center justify-content-center">{{ complexCategory.getViewAliasesOptions('area', paramsValues) }} <span>кв.м.</span></span>
                                <span class="objects__number objects__number_two d-flex align-items-center justify-content-center">
                                    {% if advertisement.Advertisement.rent %}
                                        {{ price.format(advertisement.Advertisement.price_area_year) }} <span>руб./кв.м. в год</span>
                                    {% else %}
                                        {{ price.format(advertisement.Advertisement.price) }} <span>руб.</span>
                                    {% endif %}
                                </span>
                                <span class="objects__number objects__number_three d-flex align-items-center justify-content-center">{{ complexCategory.getViewAliasesOptions('floor', paramsValues) }}</span>
                                <span class="objects__number objects__number_four d-xl-flex d-lg-flex align-items-center justify-content-center d-none">{{ complexCategory.getViewAliasesOptions('quality', paramsValues) }}</span>
                                <span class="objects__number objects__number_five d-xl-flex d-lg-flex align-items-center justify-content-center d-none">{{ complexCategory.getViewAliasesOptions('planirovka', paramsValues) }}</span>
                            </div>
                            <div class="objects__right d-flex justify-content-between align-items-center">
                                <div class="objects__button_one d-xl-flex d-lg-flex d-md-flex d-none align-items-center justify-content-center">
                                    <a href="{{ adView.getUrl(advertisement) }}" class="objects__btn btn-3">Подробнее</a>
                                </div>
                                <div class="objects__button_two d-xl-flex d-lg-flex d-md-flex d-none align-items-center justify-content-center">
                                    <button class="objects__save" type="button" data-favorite="{{ isFavorite ? 'remove' : 'add'}}" data-favorite-invert="{{ isFavorite ? 'add' : 'remove'}}" data-favorite-id="{{ advertisement.Advertisement.id }}" data-favorite-reload="yes">
                                        <svg data-icon="add" class="{{ isFavorite ? 'd-none' : ''}}" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 22V4C20 2.897 19.103 2 18 2H6C4.897 2 4 2.897 4 4V22L12 17.428L20 22ZM6 10V4H18V18.553L12 15.125L6 18.553V10Z" fill="#333333" /></svg>
                                        <svg data-icon="remove" class="{{ isFavorite ? '' : 'd-none'}}" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 22V4C20 2.897 19.103 2 18 2H6C4.897 2 4 2.897 4 4V22L12 17.428L20 22Z" fill="#333333" /></svg>
                                    </button>
                                </div>
                                <a href="{{ adView.getUrl(advertisement) }}" class="objects__more d-xl-none d-lg-none d-md-none d-flex flex-column align-items-center justify-content-center">
                                    <svg width="9" height="13" viewBox="0 0 9 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12L8 6.5L1 1" stroke="white" stroke-linecap="round" /></svg>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</section>
